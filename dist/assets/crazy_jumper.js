const{Application:fe,Graphics:z,Text:g,Container:P}=PIXI;async function he(){const A=document.getElementById("crazyJumperCanvas"),D=4/3;let O=Math.min(window.innerWidth,980),Y=O/D;Y>Math.min(window.innerHeight,735)&&(Y=Math.min(window.innerHeight,735),O=Y*D);const te=()=>({width:O,height:Y}),e=new fe;await e.init({canvas:A,background:"#333333"});let n,t,C,M=1e3,o;const ne=13,F=2,X=[2,4,6,12,ne];let u,T;const a=new P,j=new P,G=new P,E=new P;e.stage.addChild(E,a,G,j);const S=new g({text:`Balance: ${M}`,style:{fill:16777215,fontSize:28}});S.anchor.set(1,0),E.addChild(S);const m=new g({text:"â“˜ INFO",style:{fill:16777215,fontSize:28,fontWeight:"bold",cursor:"pointer"}});m.anchor.set(0,0),m.position.set(20,20),m.eventMode="static",m.cursor="pointer",E.addChild(m);const w=new g({text:`Bet: 1
Win: `,style:{fill:16776960,fontSize:28}});w.anchor.set(0,0),E.addChild(w);const x=new P;x.visible=!1,e.stage.addChild(x);const U=new z().rect(0,0,e.renderer.width,e.renderer.height).fill({color:0,alpha:.8});x.addChild(U);const B=e.renderer.width*.8,p=e.renderer.height*.7,Z=new z().roundRect((e.renderer.width-B)/2,(e.renderer.height-p)/2,B,p,16).fill({color:2236996});x.addChild(Z);const b=new g({text:`
CREAZY JUMPER

â€¢ RTP: ??%
â€¢ Press PLAY to start.
â€¢ Your balance decreases by 1 per play.
â€¢ Winnings are shown on the right.

Good luck! ðŸ€
  `,style:{fill:16777215,fontSize:24,wordWrap:!0,wordWrapWidth:B*.9,lineHeight:36}});b.anchor.set(.5,0),b.position.set(e.renderer.width/2,(e.renderer.height-p)/2+50),x.addChild(b);const y=new g({text:"âœ– CLOSE",style:{fill:16729156,fontSize:28,fontWeight:"bold",cursor:"pointer"}});y.anchor.set(.5),y.position.set(e.renderer.width/2,(e.renderer.height+p)/2-40),y.eventMode="static",y.cursor="pointer",x.addChild(y),m.on("pointerdown",()=>{x.visible=!0}),y.on("pointerdown",()=>{x.visible=!1});function q(i){if(i===0){const r=n/2,s=t/2,l=Math.min(n,t)*.25,c=Math.min(n,t)*.04;return{x:r,y:s-l-c*2}}else if(i>=1&&i<=12){const r=n/2,s=t/2,l=Math.min(n,t)*.25,c=(i-1)/12*Math.PI*2-Math.PI/2;return{x:r+l*Math.cos(c),y:s+l*Math.sin(c)}}else if(i===13){const r=n/2,s=t/2;return{x:r,y:s}}return{x:0,y:0}}function ie(i,r){let s=0;if(!i||i.length===0||!o)return;const l=gsap.timeline();for(let c=0;c<i.length;c++){const R=q(i[c]),W=i[c];l.to(o,{x:R.x,y:R.y,duration:.5,ease:"power1.inOut",onStart:()=>{gsap.to(o.scale,{x:1.2,y:.8,duration:.25,yoyo:!0,repeat:1}),!X.includes(W)&&W!==0&&(s+=F),w.text=`Bet: 1
Win: ${s}`}})}l.call(()=>{setTimeout(()=>{u.eventMode="static",u.alpha=1,w.text=`Bet: 1
Win: ${r}`,o.x=T.x,o.y=T.y*.8},500)})}function $(){S.text=`Balance: ${M}`,S.position.set(n-20,20)}function oe(){const i=n*.8,r=t*.4;w.position.set(i,r)}function K(){const{width:i,height:r}=te(),s=4/3;n=i,t=i/s,t>r&&(t=r,n=t*s),e.renderer.resize(n,t),A.style.display="block",A.style.margin="0 auto",a.removeChildren(),j.removeChildren(),G.removeChildren(),C=t*.6,b.style.fontSize=C*.05,b.style.lineHeight=C*.05*1.2,y.style.fontSize=C*.05,m.style.fontSize=C*.05,S.style.fontSize=C*.05,S.position.set(n-20,20),w.style.fontSize=C*.05;const l=n*.8,c=t*.4;w.position.set(l,c);const R=n*.25,W=t*.08,Q=t*.9;function re(d,f,H){const h=new P,v=new z().roundRect(-R/2,-W/2,R,W,12).fill({color:f});h.addChild(v);const L=new g({text:d,style:{fill:16777215,fontSize:W*.5}});return L.anchor.set(.5),h.addChild(L),h.eventMode="static",h.cursor="pointer",h.on("pointerdown",async()=>{v.tint=21964,await H(),v.tint=16777215,v.tint=f}),h}u=re("PLAY",30719,async()=>{if(!(M<=0)){u.eventMode="none",u.alpha=.5,w.text=`Bet: 1
Win: `,M-=1,$();try{const f=await(await fetch("/api/crazy_jumper/play",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({balance:M})})).json();ie(f.states,f.win),M=f.balance.toFixed(2),$()}catch{}}}),U.clear().rect(0,0,e.renderer.width,e.renderer.height).fill({color:0,alpha:.8}),Z.clear().roundRect((e.renderer.width-B)/2,(e.renderer.height-p)/2,B,p,16).fill({color:2236996}),b.style.wordWrapWidth=e.renderer.width*.7,b.position.set(e.renderer.width/2,(e.renderer.height-p)/2+50),y.position.set(e.renderer.width/2,(e.renderer.height+p)/2-40),u.x=n/2,u.y=Q,j.addChild(u),a.removeChildren();const J=n/2,N=t/2,V=Math.min(n,t)*.25,I=Math.min(n,t)*.04,ee=43758,se=16729156;for(let d=0;d<12;d++){const f=d/12*Math.PI*2-Math.PI/2,H=J+V*Math.cos(f),h=N+V*Math.sin(f),v=X.includes(d+1)?se:ee,L=new z().circle(H,h,I).fill({color:v});a.addChild(L);const de=X.includes(d+1)?"":`${F}`,_=new g({text:de,style:{fill:16777215,fontSize:I*.9,fontWeight:"bold"}});_.anchor.set(.5),_.position.set(H,h),a.addChild(_)}const ce=new z().circle(J,N,I*1.5).fill({color:ee});a.addChild(ce);const k=new g({text:"COLLECT",style:{fill:16777215,fontSize:I*.6,fontWeight:"bold"}});k.anchor.set(.5),k.position.set(J,N),a.addChild(k);const ae=I*.8;function le(){o&&a.removeChild(o),o=new z().circle(0,0,ae).fill({color:16776960}),o.zIndex=10,a.addChild(o)}le(),T=q(0),o.x=T.x,o.y=T.y*.8,$(),oe()}K(),window.addEventListener("resize",K)}he();
